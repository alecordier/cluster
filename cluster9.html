<html>
<head>

  <h1 align='center' style= 'font-family: sans-serif'>Cluster 9</h1>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
   <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
  <script src="jquery.csv.min.js"></script>

  <style>
  .dropbtn {
      background-color: #4CAF50;
      color: white;
      padding: 16px;
      font-size: 16px;
      border: none;
      cursor: pointer;
  }

  .dropbtn:hover, .dropbtn:focus {
      background-color: #3e8e41;
  }

  .dropdown {
      position: relative;
      display: inline-block;
  }

  .dropdown-content {
      display: none;
      position: absolute;
      background-color: #f9f9f9;
      min-width: 160px;
      overflow: auto;
      box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
      z-index: 1;
  }

  .dropdown-content a {
      color: black;
      padding: 12px 16px;
      text-decoration: none;
      display: block;
  }

  .dropdown a:hover {background-color: #f1f1f1}

  .show {display:block;}
  </style>

</head>
<body>

  <script>
  google.charts.load('current', {'packages':['corechart']});
  google.charts.setOnLoadCallback(init);
  var data;
  var count=1;
  var num=9;

  function init(){
    for(count; count<16; count++){
      drawchart(count);
    }
  }

  function drawchart(count){

        var req = new XMLHttpRequest();
        var url= 'testJson.json';
        req.open("GET", url, true);
        req.onreadystatechange=function(){
          if(req.readyState === XMLHttpRequest.DONE && req.status == 200) {
            data = JSON.parse(req.responseText);
            var chartData = new google.visualization.DataTable();
            chartData.addColumn('date', 'Date');
            chartData.addColumn('number', 'Count');
            var length = data.Clusters[num].Members.length;
            //first graph is of average data
            if (count==1){
              //loops through and sets date and gets data for each day
              for(var i =1; i<27; i++){
                chartData.addRow([ new Date(2017,3,i), data.Clusters[num].Average[i-1] ]);
              }
            }
            //other graphs are of member data
            //graph first 5 member curves
          else if(1<count<6){
            for(var i =1; i<27; i++){
            chartData.addRow([ new Date(2017,3,i), data.Clusters[num].Members[count][i-1] ]);
          }}
          //graph middle 5 member curves
          else if(6<count<11){
            for(var i =1; i<27; i++){
            chartData.addRow([ new Date(2017,3,i), data.Clusters[num].Members[count+(Math.round(length/2))][i-1] ]);
          }}
          //graph last 5 member curves
          else{
            for(var i =1; i<27; i++){
            chartData.addRow([ new Date(2017,3,i), data.Clusters[num].Members[length-count][i-1] ]);
          }}

          var chart = new google.visualization.ChartWrapper()
            chart.setContainerId('chart'+count+'_div');
            chart.setChartType('LineChart');
            chart.setDataTable(chartData);
            chart.setOptions({
              'chartArea': {'width': '70%', 'height': '80%'},
              'legend':'none',
              'colors':['orange']
            });
          chart.draw();
          }
        };
       req.send();
     }

  </script>

  <div class="dropdown">
  <button onclick="myFunction()" class="dropbtn">Choose Cluster</button>
    <div id="myDropdown" class="dropdown-content">
      <a href="#home">Home</a>
      <a href="#about">About</a>
      <a href="#contact">Contact</a>
    </div>
  </div>

  <script>
/* When the user clicks on the button,
toggle between hiding and showing the dropdown content */
function myFunction() {
    document.getElementById("myDropdown").classList.toggle("show");
}

// Close the dropdown if the user clicks outside of it
window.onclick = function(event) {
  if (!event.target.matches('.dropbtn')) {

    var dropdowns = document.getElementsByClassName("dropdown-content");
    var i;
    for (i = 0; i < dropdowns.length; i++) {
      var openDropdown = dropdowns[i];
      if (openDropdown.classList.contains('show')) {
        openDropdown.classList.remove('show');
      }
    }
  }
}
</script>

  <h2 style= 'font-family: sans-serif'>Average</h2>

  <div id='chart1_div' style="width: 900px; height: 500px"></div>

  <h2 style= 'font-family: sans-serif'>Member Charts</h2>
  <div id='chart2_div' style="width: 900px; height: 500px"></div>
  <div id='chart3_div' style="width: 900px; height: 500px"></div>
  <div id='chart4_div' style="width: 900px; height: 500px"></div>
  <div id='chart5_div' style="width: 900px; height: 500px"></div>
  <div id='chart6_div' style="width: 900px; height: 500px"></div>
  <div id='chart7_div' style="width: 900px; height: 500px"></div>
  <div id='chart8_div' style="width: 900px; height: 500px"></div>
  <div id='chart9_div' style="width: 900px; height: 500px"></div>
  <div id='chart10_div' style="width: 900px; height: 500px"></div>
  <div id='chart11_div' style="width: 900px; height: 500px"></div>
  <div id='chart12_div' style="width: 900px; height: 500px"></div>
  <div id='chart13_div' style="width: 900px; height: 500px"></div>
  <div id='chart14_div' style="width: 900px; height: 500px"></div>
  <div id='chart15_div' style="width: 900px; height: 500px"></div>



</body>
</html>
